import{_ as te,a as ne,C as re,R as ae}from"./index.vue_vue_type_script_setup_true_lang-CoLSOu_1.js";import{aS as Q,e as x,aq as X,B as b,aT as ie,j as N,H as oe,aU as w,C as se,ax as T,aV as J,a5 as ue,aW as le,aX as ce,E as O,Q as de,u as C,a6 as fe,d as me,a as pe,r as ve,ar as he,c as _,f as E,as as ge,F as A,l as H,at as ye,b as j,k as be,m as we,h as Se,R as _e,o as S}from"./index-BTICN6pY.js";import{c as Oe}from"./commonService-wGR85rO1.js";import{c as Ce}from"./cloneDeep-4GB6aLY6.js";import{s as D}from"./size-BiBUwNCT.js";import"./_getPrototype-CcxaE94i.js";function Y(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var u=Array(o);++r<o;)u[r]=e[r+t];return u}function xe(e,t,n){return e&&e.length?(t=t===void 0?1:Q(t),Y(e,0,t<0?0:t)):[]}function Me(e,t,n){var r=e==null?0:e.length;return r?(t=t===void 0?1:Q(t),t=r-t,Y(e,t<0?0:t,r)):[]}var je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};function q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){ke(e,o,n[o])})}return e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(t,n){var r=q({},t,n.attrs);return x(X,q({},r,{icon:je}),null)};I.displayName="CopyOutlined";I.inheritAttrs=!1;var $e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};function G(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){Pe(e,o,n[o])})}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(t,n){var r=G({},t,n.attrs);return x(X,G({},r,{icon:$e}),null)};R.displayName="SendOutlined";R.inheritAttrs=!1;function Z(e){return le()?(ce(e),!0):!1}const W=new WeakMap,Ee=(...e)=>{var t;const n=e[0],r=(t=T())==null?void 0:t.proxy;if(r==null&&!J())throw new Error("injectLocal must be called in setup");return r&&W.has(r)&&n in W.get(r)?W.get(r)[n]:ue(...e)},z=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const We=Object.prototype.toString,Le=e=>We.call(e)==="[object Object]";function Ne(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const r=t;t=void 0,r&&await r},n}function Te(e,t){var n;if(typeof e=="number")return e+t;const r=((n=e.match(/^-?\d+\.?\d*/))==null?void 0:n[0])||"",o=e.slice(r.length),u=Number.parseFloat(r)+t;return Number.isNaN(u)?e:u+o}function P(e){return e.endsWith("rem")?Number.parseFloat(e)*16:Number.parseFloat(e)}function L(e){return Array.isArray(e)?e:[e]}function Ie(e){return T()}function Re(e,t=!0,n){Ie()?N(e,n):t?e():oe(e)}function ze(e,t,n={}){const{immediate:r=!0,immediateCallback:o=!1}=n,u=b(!1);let f=null;function s(){f&&(clearTimeout(f),f=null)}function l(){u.value=!1,s()}function c(...d){o&&e(),s(),u.value=!0,f=setTimeout(()=>{u.value=!1,f=null,e(...d)},w(t))}return r&&(u.value=!0,z&&c()),Z(l),{isPending:ie(u),start:c,stop:l}}function Be(e,t,n){return se(e,t,{...n,immediate:!0})}const B=z?window:void 0,K=z?window.navigator:void 0;function Fe(e){var t;const n=w(e);return(t=n==null?void 0:n.$el)!=null?t:n}function F(...e){const t=[],n=()=>{t.forEach(s=>s()),t.length=0},r=(s,l,c,d)=>(s.addEventListener(l,c,d),()=>s.removeEventListener(l,c,d)),o=O(()=>{const s=L(w(e[0])).filter(l=>l!=null);return s.every(l=>typeof l!="string")?s:void 0}),u=Be(()=>{var s,l;return[(l=(s=o.value)==null?void 0:s.map(c=>Fe(c)))!=null?l:[B].filter(c=>c!=null),L(w(o.value?e[1]:e[0])),L(C(o.value?e[2]:e[1])),w(o.value?e[3]:e[2])]},([s,l,c,d])=>{if(n(),!(s!=null&&s.length)||!(l!=null&&l.length)||!(c!=null&&c.length))return;const h=Le(d)?{...d}:d;t.push(...s.flatMap(y=>l.flatMap(a=>c.map(i=>r(y,a,i,h)))))},{flush:"post"}),f=()=>{u(),n()};return Z(n),f}function Ve(){const e=b(!1),t=T();return t&&N(()=>{e.value=!0},t),e}function V(e){const t=Ve();return O(()=>(t.value,!!e()))}const Ae=Symbol("vueuse-ssr-width");function ee(){const e=J()?Ee(Ae,null):null;return typeof e=="number"?e:void 0}function $(e,t={}){const{window:n=B,ssrWidth:r=ee()}=t,o=V(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function"),u=b(typeof r=="number"),f=b(),s=b(!1),l=c=>{s.value=c.matches};return de(()=>{if(u.value){u.value=!o.value;const c=w(e).split(",");s.value=c.some(d=>{const h=d.includes("not all"),y=d.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),a=d.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let i=!!(y||a);return y&&i&&(i=r>=P(y[1])),a&&i&&(i=r<=P(a[1])),h?!i:i});return}o.value&&(f.value=n.matchMedia(w(e)),s.value=f.value.matches)}),F(f,"change",l,{passive:!0}),O(()=>s.value)}const He={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function De(e,t={}){function n(a,i){let m=w(e[w(a)]);return i!=null&&(m=Te(m,i)),typeof m=="number"&&(m=`${m}px`),m}const{window:r=B,strategy:o="min-width",ssrWidth:u=ee()}=t,f=typeof u=="number",s=f?b(!1):{value:!0};f&&Re(()=>s.value=!!r);function l(a,i){return!s.value&&f?a==="min"?u>=P(i):u<=P(i):r?r.matchMedia(`(${a}-width: ${i})`).matches:!1}const c=a=>$(()=>`(min-width: ${n(a)})`,t),d=a=>$(()=>`(max-width: ${n(a)})`,t),h=Object.keys(e).reduce((a,i)=>(Object.defineProperty(a,i,{get:()=>o==="min-width"?c(i):d(i),enumerable:!0,configurable:!0}),a),{});function y(){const a=Object.keys(e).map(i=>[i,h[i],P(n(i))]).sort((i,m)=>i[2]-m[2]);return O(()=>a.filter(([,i])=>i.value).map(([i])=>i))}return Object.assign(h,{greaterOrEqual:c,smallerOrEqual:d,greater(a){return $(()=>`(min-width: ${n(a,.1)})`,t)},smaller(a){return $(()=>`(max-width: ${n(a,-.1)})`,t)},between(a,i){return $(()=>`(min-width: ${n(a)}) and (max-width: ${n(i,-.1)})`,t)},isGreater(a){return l("min",n(a,.1))},isGreaterOrEqual(a){return l("min",n(a))},isSmaller(a){return l("max",n(a,-.1))},isSmallerOrEqual(a){return l("max",n(a))},isInBetween(a,i){return l("min",n(a))&&l("max",n(i,-.1))},current:y,active(){const a=y();return O(()=>a.value.length===0?"":a.value.at(o==="min-width"?-1:0))}})}function U(e,t={}){const{controls:n=!1,navigator:r=K}=t,o=V(()=>r&&"permissions"in r),u=b(),f=typeof e=="string"?{name:e}:e,s=b(),l=()=>{var d,h;s.value=(h=(d=u.value)==null?void 0:d.state)!=null?h:"prompt"};F(u,"change",l,{passive:!0});const c=Ne(async()=>{if(o.value){if(!u.value)try{u.value=await r.permissions.query(f)}catch{u.value=void 0}finally{l()}if(n)return fe(u.value)}});return c(),n?{state:s,isSupported:o,query:c}:s}function qe(e={}){const{navigator:t=K,read:n=!1,source:r,copiedDuring:o=1500,legacy:u=!1}=e,f=V(()=>t&&"clipboard"in t),s=U("clipboard-read"),l=U("clipboard-write"),c=O(()=>f.value||u),d=b(""),h=b(!1),y=ze(()=>h.value=!1,o,{immediate:!1});async function a(){let p=!(f.value&&g(s.value));if(!p)try{d.value=await t.clipboard.readText()}catch{p=!0}p&&(d.value=M())}c.value&&n&&F(["copy","cut"],a,{passive:!0});async function i(p=w(r)){if(c.value&&p!=null){let v=!(f.value&&g(l.value));if(!v)try{await t.clipboard.writeText(p)}catch{v=!0}v&&m(p),d.value=p,h.value=!0,y.start()}}function m(p){const v=document.createElement("textarea");v.value=p??"",v.style.position="absolute",v.style.opacity="0",document.body.appendChild(v),v.select(),document.execCommand("copy"),v.remove()}function M(){var p,v,k;return(k=(v=(p=document==null?void 0:document.getSelection)==null?void 0:p.call(document))==null?void 0:v.toString())!=null?k:""}function g(p){return p==="granted"||p==="prompt"}return{isSupported:c,text:d,copied:h,copy:i}}const Ge={class:"p-4"},Ue={key:0,class:"h-12 flex items-center justify-center"},Qe={key:1},Xe={class:"mb-1 inline-flex break-all"},Je=["onClick"],Ye=["onClick"],Ze=["onClick"],Ke=["onClick"],et={key:1,class:"w-full",controls:""},tt=["src"],ut=me({__name:"index",setup(e){const t=Se(),n=pe({fetching:!1}),r=ve([]),{copy:o}=qe(),u=De(He),f=O(()=>u.lg.value?4:u.md.value?3:2),s=O(()=>{const a=[];let i=Ce(r.value);const m=D(r.value);if(m===0)return[];const M=Math.trunc(m/f.value);for(let g=1;g<=f.value;g++){if(g===f.value){const k=i;a.push(k);continue}const p=D(i),v=xe(i,M);a.push(v),i=Me(i,p-M)}return a});N(()=>{l()});async function l(){n.fetching=!0;const{error:a,data:i}=await Oe.getFiles().finally(()=>n.fetching=!1);a||(i.splice(0,1),r.value=he(i,m=>({...m,name:m.name.replace("tests/","").replace(".mp4","")})))}function c(a){const i=r.value.find(m=>m.id===a.id);return i?i.isStarted:!1}function d(a){const i=r.value.find(m=>m.id===a.id);if(!i)return!1;i.isStarted=!0}async function h(a){await o(a.name),we.success("Copied")}async function y(a){t.push({name:_e.UPLOAD_IMAGE,query:{fileName:a.name}})}return(a,i)=>(S(),_("div",Ge,[n.fetching?(S(),_("div",Ue,[x(C(ge))])):(S(),_("div",Qe,[x(C(ae),{gutter:[16,16]},{default:E(()=>[(S(!0),_(A,null,H(s.value,(m,M)=>(S(),ye(C(re),{key:M,span:24/f.value},{default:E(()=>[(S(!0),_(A,null,H(m,(g,p)=>(S(),_("div",{key:p,class:"p-1 mb-4 border border-solid border-violet-200 rounded overflow-hidden"},[j("div",Xe,[j("div",null,be(g.name),1),j("div",{class:"ml-3 cursor-pointer select-none",onClick:v=>h(g)},[x(C(I))],8,Je),j("div",{class:"ml-3 cursor-pointer select-none",onClick:v=>y(g)},[x(C(R))],8,Ye)]),c(g)?(S(),_("video",et,[j("source",{src:g.url,type:"video/mp4"},null,8,tt)])):(S(),_("div",{key:0,class:"cursor-pointer",onClick:v=>d(g)},[x(C(te),{src:g.previewImage,class:"w-full h-auto",loading:"lazy"},{default:E(()=>[j("img",{src:ne,class:"w-full h-auto min-h-14",loading:"lazy",onClick:v=>d(g)},null,8,Ke)]),_:2},1032,["src"])],8,Ze))]))),128))]),_:2},1032,["span"]))),128))]),_:1})]))]))}});export{ut as default};
