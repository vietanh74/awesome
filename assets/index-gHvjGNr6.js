import{a as Z,_ as K}from"./index.vue_vue_type_script_setup_true_lang-CXuukTsh.js";import{aT as G,e as C,as as q,B as y,aU as ee,j as L,H as te,aV as b,C as ne,az as N,aW as U,a5 as re,aX as ae,aY as ie,E as _,Q as oe,u as j,a6 as se,d as ue,a as le,r as ce,at as de,c as S,b as O,F as fe,l as me,au as pe,k as ve,f as he,m as ge,h as ye,R as be,o as x}from"./index-BmUGfrVq.js";import{c as we}from"./commonService-sgsA6ALA.js";import{c as _e}from"./cloneDeep-BlcxipHb.js";import{s as F}from"./size-BHGI98Ia.js";import"./_getPrototype-D0BqKuZR.js";function Q(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var l=Array(o);++r<o;)l[r]=e[r+t];return l}function Se(e,t,n){return e&&e.length?(t=t===void 0?1:G(t),Q(e,0,t<0?0:t)):[]}function Oe(e,t,n){var r=e==null?0:e.length;return r?(t=t===void 0?1:G(t),t=r-t,Q(e,t<0?0:t,r)):[]}var xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};function R(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){Ce(e,o,n[o])})}return e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(t,n){var r=R({},t,n.attrs);return C(q,R({},r,{icon:xe}),null)};T.displayName="CopyOutlined";T.inheritAttrs=!1;var Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};function H(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),r.forEach(function(o){je(e,o,n[o])})}return e}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(t,n){var r=H({},t,n.attrs);return C(q,H({},r,{icon:Me}),null)};z.displayName="SendOutlined";z.inheritAttrs=!1;function X(e){return ae()?(ie(e),!0):!1}const E=new WeakMap,ke=(...e)=>{var t;const n=e[0],r=(t=N())==null?void 0:t.proxy;if(r==null&&!U())throw new Error("injectLocal must be called in setup");return r&&E.has(r)&&n in E.get(r)?E.get(r)[n]:re(...e)},I=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const $e=Object.prototype.toString,Pe=e=>$e.call(e)==="[object Object]";function Ee(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const r=t;t=void 0,r&&await r},n}function We(e,t){var n;if(typeof e=="number")return e+t;const r=((n=e.match(/^-?\d+\.?\d*/))==null?void 0:n[0])||"",o=e.slice(r.length),l=Number.parseFloat(r)+t;return Number.isNaN(l)?e:l+o}function k(e){return e.endsWith("rem")?Number.parseFloat(e)*16:Number.parseFloat(e)}function W(e){return Array.isArray(e)?e:[e]}function Le(e){return N()}function Ne(e,t=!0,n){Le()?L(e,n):t?e():te(e)}function Te(e,t,n={}){const{immediate:r=!0,immediateCallback:o=!1}=n,l=y(!1);let f=null;function s(){f&&(clearTimeout(f),f=null)}function u(){l.value=!1,s()}function c(...d){o&&e(),s(),l.value=!0,f=setTimeout(()=>{l.value=!1,f=null,e(...d)},b(t))}return r&&(l.value=!0,I&&c()),X(u),{isPending:ee(l),start:c,stop:u}}function ze(e,t,n){return ne(e,t,{...n,immediate:!0})}const V=I?window:void 0,Y=I?window.navigator:void 0;function Ie(e){var t;const n=b(e);return(t=n==null?void 0:n.$el)!=null?t:n}function A(...e){const t=[],n=()=>{t.forEach(s=>s()),t.length=0},r=(s,u,c,d)=>(s.addEventListener(u,c,d),()=>s.removeEventListener(u,c,d)),o=_(()=>{const s=W(b(e[0])).filter(u=>u!=null);return s.every(u=>typeof u!="string")?s:void 0}),l=ze(()=>{var s,u;return[(u=(s=o.value)==null?void 0:s.map(c=>Ie(c)))!=null?u:[V].filter(c=>c!=null),W(b(o.value?e[1]:e[0])),W(j(o.value?e[2]:e[1])),b(o.value?e[3]:e[2])]},([s,u,c,d])=>{if(n(),!(s!=null&&s.length)||!(u!=null&&u.length)||!(c!=null&&c.length))return;const h=Pe(d)?{...d}:d;t.push(...s.flatMap(m=>u.flatMap(a=>c.map(i=>r(m,a,i,h)))))},{flush:"post"}),f=()=>{l(),n()};return X(n),f}function Ve(){const e=y(!1),t=N();return t&&L(()=>{e.value=!0},t),e}function B(e){const t=Ve();return _(()=>(t.value,!!e()))}const Ae=Symbol("vueuse-ssr-width");function J(){const e=U()?ke(Ae,null):null;return typeof e=="number"?e:void 0}function M(e,t={}){const{window:n=V,ssrWidth:r=J()}=t,o=B(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function"),l=y(typeof r=="number"),f=y(),s=y(!1),u=c=>{s.value=c.matches};return oe(()=>{if(l.value){l.value=!o.value;const c=b(e).split(",");s.value=c.some(d=>{const h=d.includes("not all"),m=d.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),a=d.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let i=!!(m||a);return m&&i&&(i=r>=k(m[1])),a&&i&&(i=r<=k(a[1])),h?!i:i});return}o.value&&(f.value=n.matchMedia(b(e)),s.value=f.value.matches)}),A(f,"change",u,{passive:!0}),_(()=>s.value)}const Be={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function Fe(e,t={}){function n(a,i){let g=b(e[b(a)]);return i!=null&&(g=We(g,i)),typeof g=="number"&&(g=`${g}px`),g}const{window:r=V,strategy:o="min-width",ssrWidth:l=J()}=t,f=typeof l=="number",s=f?y(!1):{value:!0};f&&Ne(()=>s.value=!!r);function u(a,i){return!s.value&&f?a==="min"?l>=k(i):l<=k(i):r?r.matchMedia(`(${a}-width: ${i})`).matches:!1}const c=a=>M(()=>`(min-width: ${n(a)})`,t),d=a=>M(()=>`(max-width: ${n(a)})`,t),h=Object.keys(e).reduce((a,i)=>(Object.defineProperty(a,i,{get:()=>o==="min-width"?c(i):d(i),enumerable:!0,configurable:!0}),a),{});function m(){const a=Object.keys(e).map(i=>[i,h[i],k(n(i))]).sort((i,g)=>i[2]-g[2]);return _(()=>a.filter(([,i])=>i.value).map(([i])=>i))}return Object.assign(h,{greaterOrEqual:c,smallerOrEqual:d,greater(a){return M(()=>`(min-width: ${n(a,.1)})`,t)},smaller(a){return M(()=>`(max-width: ${n(a,-.1)})`,t)},between(a,i){return M(()=>`(min-width: ${n(a)}) and (max-width: ${n(i,-.1)})`,t)},isGreater(a){return u("min",n(a,.1))},isGreaterOrEqual(a){return u("min",n(a))},isSmaller(a){return u("max",n(a,-.1))},isSmallerOrEqual(a){return u("max",n(a))},isInBetween(a,i){return u("min",n(a))&&u("max",n(i,-.1))},current:m,active(){const a=m();return _(()=>a.value.length===0?"":a.value.at(o==="min-width"?-1:0))}})}function D(e,t={}){const{controls:n=!1,navigator:r=Y}=t,o=B(()=>r&&"permissions"in r),l=y(),f=typeof e=="string"?{name:e}:e,s=y(),u=()=>{var d,h;s.value=(h=(d=l.value)==null?void 0:d.state)!=null?h:"prompt"};A(l,"change",u,{passive:!0});const c=Ee(async()=>{if(o.value){if(!l.value)try{l.value=await r.permissions.query(f)}catch{l.value=void 0}finally{u()}if(n)return se(l.value)}});return c(),n?{state:s,isSupported:o,query:c}:s}function Re(e={}){const{navigator:t=Y,read:n=!1,source:r,copiedDuring:o=1500,legacy:l=!1}=e,f=B(()=>t&&"clipboard"in t),s=D("clipboard-read"),u=D("clipboard-write"),c=_(()=>f.value||l),d=y(""),h=y(!1),m=Te(()=>h.value=!1,o,{immediate:!1});async function a(){let p=!(f.value&&$(s.value));if(!p)try{d.value=await t.clipboard.readText()}catch{p=!0}p&&(d.value=w())}c.value&&n&&A(["copy","cut"],a,{passive:!0});async function i(p=b(r)){if(c.value&&p!=null){let v=!(f.value&&$(u.value));if(!v)try{await t.clipboard.writeText(p)}catch{v=!0}v&&g(p),d.value=p,h.value=!0,m.start()}}function g(p){const v=document.createElement("textarea");v.value=p??"",v.style.position="absolute",v.style.opacity="0",document.body.appendChild(v),v.select(),document.execCommand("copy"),v.remove()}function w(){var p,v,P;return(P=(v=(p=document==null?void 0:document.getSelection)==null?void 0:p.call(document))==null?void 0:v.toString())!=null?P:""}function $(p){return p==="granted"||p==="prompt"}return{isSupported:c,text:d,copied:h,copy:i}}const He={class:"p-4"},De={key:0,class:"h-12 flex items-center justify-center"},Ge={key:1},qe={class:"flex flex-wrap gap-4"},Ue={class:"mb-1 inline-flex break-all"},Qe=["onClick"],Xe=["onClick"],Ye=["onClick"],Je=["onClick"],Ze={key:1,class:"w-full",controls:""},Ke=["src"],ot=ue({__name:"index",setup(e){const t=ye(),n=le({fetching:!1}),r=ce([]),{copy:o}=Re(),l=Fe(Be),f=_(()=>l.lg.value?4:2);_(()=>{const m=[];let a=_e(r.value);const i=F(r.value);if(i===0)return[];const g=Math.trunc(i/f.value);for(let w=1;w<=f.value;w++){if(w===f.value){const v=a;m.push(v);continue}const $=F(a),p=Se(a,g);m.push(p),a=Oe(a,$-g)}return m}),L(()=>{s()});async function s(){n.fetching=!0;const{error:m,data:a}=await we.getFiles().finally(()=>n.fetching=!1);m||(a.splice(0,1),r.value=de(a,i=>({...i,name:i.name.replace("tests/","").replace(".mp4","")})))}function u(m){const a=r.value.find(i=>i.id===m.id);return a?a.isStarted:!1}function c(m){const a=r.value.find(i=>i.id===m.id);if(!a)return!1;a.isStarted=!0}async function d(m){await o(m.name),ge.success("Copied")}async function h(m){t.push({name:be.UPLOAD_IMAGE,query:{fileName:m.name}})}return(m,a)=>(x(),S("div",He,[n.fetching?(x(),S("div",De,[C(j(pe))])):(x(),S("div",Ge,[O("div",qe,[(x(!0),S(fe,null,me(r.value,(i,g)=>(x(),S("div",{key:g,class:"w-[calc(50%-8px)] p-1 border border-solid border-violet-200 rounded overflow-hidden"},[O("div",Ue,[O("div",null,ve(i.name),1),O("div",{class:"ml-3 cursor-pointer select-none",onClick:w=>d(i)},[C(j(T))],8,Qe),O("div",{class:"ml-3 cursor-pointer select-none",onClick:w=>h(i)},[C(j(z))],8,Xe)]),u(i)?(x(),S("video",Ze,[O("source",{src:i.url,type:"video/mp4"},null,8,Ke)])):(x(),S("div",{key:0,class:"cursor-pointer",onClick:w=>c(i)},[C(j(K),{src:i.previewImage,class:"w-full h-auto",loading:"lazy"},{default:he(()=>[O("img",{src:Z,class:"w-full h-auto min-h-14",loading:"lazy",onClick:w=>c(i)},null,8,Je)]),_:2},1032,["src"])],8,Ye))]))),128))])]))]))}});export{ot as default};
